<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">åšå®¢è¯¦æƒ… | è†å­¦è¾‰çš„ä¸ªäººä¸»é¡µ</title>
  <!-- SEO å…ƒæ ‡ç­¾ï¼šåŠ¨æ€å¡«å…… -->
  <meta name="description" id="page-description" content="">
  <meta name="keywords" id="page-keywords" content="">
  <!-- å¤–éƒ¨èµ„æºï¼šé›†æˆ MD æ¸²æŸ“å’Œä»£ç é«˜äº®åº“ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css">
  <link rel="stylesheet" href="/assets/css/css2.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <!-- æ ¸å¿ƒåº“ï¼šä¿®å¤ highlight.js å¼•å…¥é¡ºåºå’Œè·¯å¾„ -->
  <!-- 1. å…ˆåŠ è½½ highlight.js æ ¸å¿ƒåº“ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <!-- 2. å†åŠ è½½å¸¸ç”¨è¯­è¨€åŒ…ï¼ˆç¡®ä¿ä»£ç é«˜äº®æ”¯æŒæ›´å¤šè¯­è¨€ï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/javascript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/html.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/css.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/python.min.js"></script>
  <!-- 3. æœ€ååŠ è½½ Markdown æ¸²æŸ“åº“ -->
  <script src="https://cdn.jsdelivr.net/npm/marked@12.0.1/lib/marked.umd.min.js"></script>

  <!-- Tailwind é…ç½®ï¼šä¸åˆ—è¡¨é¡µä¿æŒä¸€è‡´ -->
  <script src="/vendor/tailwind.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#FF7D00',
            light: '#F5F7FA',
            dark: '#1D2939'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
            serif: ['Georgia', 'Cambria', 'serif']
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      /* ç›¸å…³æ–‡ç« å®¹å™¨æ ·å¼ */
      .related-blog-item {
        @apply flex gap-3 w-full items-start; /* ç¡®ä¿å æ»¡å®¹å™¨ï¼Œå‚ç›´å¯¹é½é¡¶éƒ¨ */
        @apply p-2 rounded-lg hover:bg-white hover:shadow-sm transition-all; /* å¢åŠ hoverèƒŒæ™¯å’Œé˜´å½± */
      }

      /* ç›¸å…³æ–‡ç« å›¾ç‰‡æ ·å¼ï¼ˆä¿æŒæ¯”ä¾‹ï¼Œé¿å…æ‹‰ä¼¸ï¼‰ */
      .related-blog-img {
        @apply w-16 h-16 md:w-18 md:h-18 object-cover rounded-lg flex-shrink-0; /* å›ºå®šå®½é«˜æ¯” */
        @apply transition-transform group-hover:scale-105; /* å¢åŠ hoverç¼©æ”¾æ•ˆæœ */
      }

      /* ç›¸å…³æ–‡ç« æ–‡å­—å®¹å™¨æ ·å¼ï¼ˆæ§åˆ¶æ¢è¡Œå’Œæº¢å‡ºï¼‰ */
      .related-blog-text {
        @apply flex-1 min-w-0; /* flex-1 å æ»¡å‰©ä½™ç©ºé—´ï¼Œmin-w-0 è§£å†³æ–‡å­—æº¢å‡ºé—®é¢˜ */
      }

      /* ç›¸å…³æ–‡ç« æ ‡é¢˜æ ·å¼ */
      .related-blog-title {
        @apply text-sm md:text-base font-medium text-gray-800 group-hover:text-primary transition-colors;
        @apply line-clamp-2; /* å¼ºåˆ¶2è¡Œæº¢å‡ºéšè—ï¼Œé¿å…é«˜åº¦æ··ä¹± */
      }

      /* ç›¸å…³æ–‡ç« æ—¥æœŸæ ·å¼ */
      .related-blog-date {
        @apply text-gray-500 text-xs md:text-sm mt-1;
      }
      /* ç›¸å…³æ–‡ç« å®¹å™¨ï¼šç»Ÿä¸€é—´è· */
      #related-blogs {
        @apply space-y-4;
      }

      /* å•ä¸ªæ–‡ç« é¡¹ï¼šhover é˜´å½± */
      .related-blog-item {
        @apply bg-white border transition-shadow;
      }

      /* å°é¢å›¾å®¹å™¨ï¼šå›ºå®šå®½é«˜æ¯” */
      .related-blog-img-wrap {
        @apply overflow-hidden;
      }

      /* æ ‡é¢˜æˆªæ–­ï¼šç¡®ä¿1è¡Œæ˜¾ç¤º */
      .related-blog-text .line-clamp-1 {
        @apply overflow-hidden text-ellipsis whitespace-nowrap;
      }
      .content-auto {
        content-visibility: auto;
      }
      /* åšå®¢å†…å®¹æ ·å¼ï¼šä¼˜åŒ–æ’ç‰ˆ */
      .blog-content {
        @apply font-serif text-gray-700 leading-relaxed;
      }
      /* ä»£ç å—å®¹å™¨æ ·å¼ï¼šç¡®ä¿èƒŒæ™¯è‰²ã€å†…è¾¹è·ã€è¾¹æ¡†å¯è§ */
      .blog-content pre {
        @apply my-4 p-4 bg-gray-900 text-gray-100 rounded-lg overflow-x-auto;
        @apply shadow-md; /* æ–°å¢é˜´å½±ï¼Œå¢å¼ºè§†è§‰åŒºåˆ† */
      }

      /* è¡Œå†…ä»£ç æ ·å¼ï¼šä¸ä»£ç å—åŒºåˆ†å¼€ */
      .blog-content code {
        @apply font-mono text-sm bg-gray-100 px-1 py-0.5 rounded;
        @apply text-gray-800; /* ç¡®ä¿è¡Œå†…ä»£ç æ–‡å­—é¢œè‰²æ¸…æ™° */
      }

      /* ä»£ç å—å†…çš„ä»£ç æ ·å¼ï¼šç»§æ‰¿å®¹å™¨æ ·å¼ï¼Œé¿å…å†²çª */
      .blog-content pre code {
        @apply bg-transparent px-0 py-0 rounded-none;
        @apply text-gray-100; /* ç¡®ä¿ä»£ç å—å†…æ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”æ˜æ˜¾ */
      }
      .blog-content h1 {
        @apply text-3xl font-bold mt-10 mb-6 text-dark border-b border-gray-200 pb-2;
      }
      .blog-content h2 {
        @apply text-2xl font-bold mt-8 mb-4 text-dark border-b border-gray-200 pb-2;
      }
      .blog-content h3 {
        @apply text-xl font-bold mt-6 mb-3 text-dark;
      }
      .blog-content p {
        @apply mb-4;
      }
      .blog-content img {
        @apply max-w-full h-auto my-6 rounded-lg shadow-sm mx-auto;
      }
      .blog-content a {
        @apply text-primary hover:underline;
      }
      .blog-content ul, .blog-content ol {
        @apply mb-4 pl-6;
      }
      .blog-content ul {
        @apply list-disc;
      }
      .blog-content ol {
        @apply list-decimal;
      }
      .blog-content blockquote {
        @apply border-l-4 border-primary pl-4 italic my-4 text-gray-600 bg-primary/5 p-3 rounded-r;
      }
      .blog-content pre {
        @apply my-4 p-4 bg-gray-900 text-gray-100 rounded-lg overflow-x-auto;
      }
      .blog-content code {
        @apply font-mono text-sm bg-gray-100 px-1 py-0.5 rounded;
      }
      .blog-content table {
        @apply w-full border-collapse my-6;
      }
      .blog-content th, .blog-content td {
        @apply border border-gray-300 px-4 py-2 text-sm;
      }
      .blog-content th {
        @apply bg-gray-50 font-semibold;
      }
      /* åŠ è½½ä¸­æ ·å¼ */
      .loader {
        width: 48px;
        height: 48px;
        border: 5px solid #165DFF;
        border-bottom-color: transparent;
        border-radius: 50%;
        animation: rotation 1s linear infinite;
      }
      @keyframes rotation {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      /* å›¾ç‰‡åŠ è½½å¤±è´¥æ ·å¼ */
      .blog-cover-fallback {
        @apply bg-gray-100 flex items-center justify-center text-gray-400 h-64 md:h-96;
      }
    }
  </style>
</head>

<body class="font-inter bg-light text-dark antialiased">
  <!-- å¯¼èˆªæ ï¼šä¿ç•™åŸæœ‰å ä½ç¬¦ -->
  <header id="navbar-placeholder"></header>

  <!-- åšå®¢è¯¦æƒ…åŒºï¼šä¼˜åŒ–å¸ƒå±€ï¼Œå¢åŠ è¿”å›æŒ‰é’® -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4 md:px-6">
      <!-- è¿”å›åˆ—è¡¨æŒ‰é’®ï¼šæ–°å¢ -->
      <div class="mb-8">
        <a href="/blog.html" class="inline-flex items-center text-gray-600 hover:text-primary transition-colors">
          <i class="fa fa-arrow-left mr-2"></i>
          <span>è¿”å›åšå®¢åˆ—è¡¨</span>
        </a>
      </div>

      <div class="flex flex-col lg:flex-row gap-8 lg:gap-10">
        <!-- ä¸»å†…å®¹åŒºï¼šä¼˜åŒ–ç§»åŠ¨ç«¯æ˜¾ç¤º -->
        <div class="lg:w-2/3">
          <!-- åŠ è½½çŠ¶æ€ -->
          <div id="loader-container" class="flex justify-center py-16">
            <div id="loader" class="loader"></div>
          </div>

          <!-- é”™è¯¯çŠ¶æ€ï¼šä¼˜åŒ–æç¤ºæ ·å¼ -->
          <div id="error-state" class="py-16 text-center hidden">
            <i class="fa fa-exclamation-triangle text-5xl text-yellow-500 mb-4"></i>
            <p class="text-gray-600 mb-4">æ–‡ç« åŠ è½½å¤±è´¥</p>
            <div class="flex flex-col sm:flex-row justify-center gap-3">
              <button id="retry-btn"
                class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
                é‡è¯•
              </button>
              <a href="/blog.html"
                class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">
                è¿”å›åˆ—è¡¨
              </a>
            </div>
          </div>

          <!-- åšå®¢å†…å®¹ï¼ˆåŠ è½½æˆåŠŸåæ˜¾ç¤ºï¼‰ -->
          <article id="blog-content-container" class="hidden">
            <!-- åšå®¢æ ‡é¢˜åŒºï¼šä¼˜åŒ–ç§»åŠ¨ç«¯æ’ç‰ˆ -->
            <div class="mb-6 md:mb-8">
              <span id="blog-category"
                class="inline-block px-3 py-1 bg-primary/10 text-primary text-xs font-medium rounded-full mb-3"></span>
              <h1 id="blog-title" class="text-[clamp(1.5rem,3vw,2.2rem)] font-bold mb-4"></h1>
              <div class="flex flex-wrap items-center gap-3 text-gray-500 text-sm">
                <div class="flex items-center">
                  <img src="/assets/images/avatar.jpg" alt="ä½œè€…å¤´åƒ" class="w-7 h-7 rounded-full mr-2">
                  <span>è†å­¦è¾‰</span>
                </div>
                <time id="blog-publish-date" datetime=""></time>
                <span id="blog-views"><i class="fa fa-eye mr-1"></i></span>
                <span id="blog-read-time"><i class="fa fa-clock-o mr-1"></i></span>
              </div>
            </div>

            <!-- åšå®¢å°é¢å›¾ï¼šå¢åŠ åŠ è½½å¤±è´¥é™çº§ -->
            <div class="mb-6 md:mb-8">
              <img id="blog-cover" src="" alt="" class="w-full h-auto rounded-xl shadow-sm"
                onError="this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden')">
              <div id="cover-fallback" class="blog-cover-fallback hidden">
                <i class="fa fa-image text-4xl"></i>
              </div>
            </div>

            <!-- åšå®¢æ­£æ–‡ï¼šMD å†…å®¹æ¸²æŸ“å®¹å™¨ -->
            <div id="blog-content" class="blog-content mb-8 md:mb-10"></div>

            <!-- æ ‡ç­¾ï¼šä¼˜åŒ–æ ·å¼ -->
            <div class="flex flex-wrap gap-2 mb-8 md:mb-10 pt-4 border-t border-gray-200">
              <span class="text-gray-500 text-sm">æ ‡ç­¾ï¼š</span>
              <div id="blog-tags"></div>
            </div>

            <!-- åˆ†äº«ï¼šä¼˜åŒ–ç§»åŠ¨ç«¯æ˜¾ç¤º -->
            <div class="flex flex-wrap items-center gap-3 mb-8 md:mb-12 pt-6 border-t border-gray-200">
              <span class="text-gray-500">åˆ†äº«ï¼š</span>
              <a href="#"
                class="w-9 h-9 rounded-full bg-[#1DA1F2]/10 text-[#1DA1F2] flex items-center justify-center hover:bg-[#1DA1F2]/20 transition-colors"
                title="åˆ†äº«åˆ°Twitter">
                <i class="fa fa-twitter"></i>
              </a>
              <a href="#"
                class="w-9 h-9 rounded-full bg-[#4267B2]/10 text-[#4267B2] flex items-center justify-center hover:bg-[#4267B2]/20 transition-colors"
                title="åˆ†äº«åˆ°Facebook">
                <i class="fa fa-facebook"></i>
              </a>
              <a href="#"
                class="w-9 h-9 rounded-full bg-[#25D366]/10 text-[#25D366] flex items-center justify-center hover:bg-[#25D366]/20 transition-colors"
                title="åˆ†äº«åˆ°WhatsApp">
                <i class="fa fa-whatsapp"></i>
              </a>
              <a href="#"
                class="w-9 h-9 rounded-full bg-[#333]/10 text-[#333] flex items-center justify-center hover:bg-[#333]/20 transition-colors"
                title="å¤åˆ¶é“¾æ¥" id="copy-link-btn">
                <i class="fa fa-link"></i>
              </a>
              <!-- å¤åˆ¶é“¾æ¥æç¤ºï¼šéšè—çŠ¶æ€ -->
              <span id="copy-success" class="text-green-500 text-sm hidden">é“¾æ¥å·²å¤åˆ¶ï¼</span>
            </div>

            <!-- ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ï¼šä¼˜åŒ–ç§»åŠ¨ç«¯å¸ƒå±€ -->
            <div
              class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 pt-8 border-t border-gray-200">
              <div id="prev-blog" class="w-full md:w-[45%]">
                <!-- ä¸Šä¸€ç¯‡æ–‡ç« é“¾æ¥ -->
              </div>
              <div id="next-blog" class="w-full md:w-[45%] text-right">
                <!-- ä¸‹ä¸€ç¯‡æ–‡ç« é“¾æ¥ -->
              </div>
            </div>
          </article>
        </div>

        <!-- ä¾§è¾¹æ ï¼šä¼˜åŒ–ç§»åŠ¨ç«¯æ˜¾ç¤ºï¼ˆå †å æ’åˆ—ï¼‰ -->
        <div class="lg:w-1/3">
          <!-- ä½œè€…ä¿¡æ¯ï¼šä¿ç•™åŸæœ‰æ ·å¼ -->
          <div class="bg-light rounded-xl p-5 mb-6">
            <div class="flex items-center gap-4 mb-4">
              <img src="/assets/images/avatar.jpg" alt="è†å­¦è¾‰" class="w-14 h-14 rounded-full object-cover">
              <div>
                <h3 class="font-semibold text-lg">è†å­¦è¾‰</h3>
                <p class="text-gray-500 text-sm">å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ</p>
              </div>
            </div>
            <p class="text-gray-600 text-sm mb-4">
              ä¸“æ³¨äºå‰åç«¯æŠ€æœ¯å¼€å‘ä¸æ¶æ„è®¾è®¡ï¼Œçƒ­è¡·äºåˆ†äº«æŠ€æœ¯å¿ƒå¾—ä¸å®æˆ˜ç»éªŒã€‚
            </p>
            <div class="flex gap-3">
              <a href="#" class="text-gray-500 hover:text-primary transition-colors" title="GitHub"><i
                  class="fa fa-github text-xl"></i></a>
              <a href="#" class="text-gray-500 hover:text-primary transition-colors" title="LinkedIn"><i
                  class="fa fa-linkedin text-xl"></i></a>
              <a href="#" class="text-gray-500 hover:text-primary transition-colors" title="Twitter"><i
                  class="fa fa-twitter text-xl"></i></a>
              <a href="#" class="text-gray-500 hover:text-primary transition-colors" title="CodePen"><i
                  class="fa fa-codepen text-xl"></i></a>
            </div>
          </div>

          <!-- ç›¸å…³æ–‡ç« ï¼šä¼˜åŒ–æ ·å¼ -->
          <div class="bg-light rounded-xl p-5 mb-6">
            <h3 class="font-semibold text-lg mb-4 flex items-center">
              <i class="fa fa-files-o text-primary mr-2"></i>ç›¸å…³æ¨èğŸ”¥
            </h3>
            <div id="related-blogs" class="space-y-3">
              <!-- ç›¸å…³æ–‡ç« å°†ç”±JSå¡«å…… -->
            </div>
          </div>

          <!-- çƒ­é—¨æ ‡ç­¾ï¼šä¼˜åŒ–æ ·å¼ -->
          <div class="bg-light rounded-xl p-5">
            <h3 class="font-semibold text-lg mb-4 flex items-center">
              <i class="fa fa-tags text-primary mr-2"></i>çƒ­é—¨æ ‡ç­¾
            </h3>
            <div id="popular-tags" class="flex flex-wrap gap-2">
              <!-- çƒ­é—¨æ ‡ç­¾å°†ç”±JSå¡«å…… -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- é¡µè„šï¼šä¿ç•™åŸæœ‰å ä½ç¬¦ -->
  <footer id="footer-placeholder"></footer>

  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’®ï¼šä¿ç•™åŸæœ‰åŠŸèƒ½ -->
  <button id="back-to-top"
    class="fixed bottom-8 right-8 w-12 h-12 rounded-full bg-primary text-white shadow-lg flex items-center justify-center opacity-0 invisible transition-all z-50">
    <i class="fa fa-arrow-up"></i>
  </button>

  <!-- æ ¸å¿ƒåº“ï¼šä»…ä¿ç•™ MD æ¸²æŸ“å’Œä»£ç é«˜äº®ï¼ˆåˆ é™¤ gray-matter å¼•å…¥ï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/marked@12.0.1/lib/marked.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>

  <!-- åŸºç¡€ç»„ä»¶è„šæœ¬ï¼šè°ƒæ•´è·¯å¾„ -->
  <script src="/assets/js/utils.js"></script>
  <script src="/assets/js/components/nav.js"></script>
  <script src="/assets/js/load-components.js"></script>
  <script src="/assets/js/components/scroll.js"></script>

  <!-- åšå®¢è¯¦æƒ…è„šæœ¬ï¼šæ ¸å¿ƒä¿®æ­£ï¼ˆé›†æˆè‡ªå®šä¹‰ Front Matter è§£æï¼‰ -->
  <script>
    // å…¨å±€çŠ¶æ€ï¼šå­˜å‚¨åšå®¢å…ƒæ•°æ®å’Œå½“å‰æ–‡ç« ä¿¡æ¯
    const state = {
      allBlogs: [], // æ‰€æœ‰åšå®¢å…ƒæ•°æ®
      currentBlog: null, // å½“å‰åšå®¢ä¿¡æ¯
      metaLoaded: false // å…ƒæ•°æ®æ˜¯å¦åŠ è½½å®Œæˆ
    };

    // DOM å…ƒç´ ç¼“å­˜
    const loaderContainer = document.getElementById('loader-container');
    const errorState = document.getElementById('error-state');
    const blogContentContainer = document.getElementById('blog-content-container');
    const retryBtn = document.getElementById('retry-btn');
    const copyLinkBtn = document.getElementById('copy-link-btn');
    const copySuccess = document.getElementById('copy-success');

    // -------------------------- æ–°å¢ï¼šè‡ªå®šä¹‰ Front Matter è§£æå‡½æ•° --------------------------
    function parseFrontMatter(mdContent) {
      const lines = mdContent.split('\n');
      const data = {};
      let content = '';
      let inFrontMatter = false;
      let frontMatterEndIndex = -1;

      // 1. æ£€æŸ¥ Front Matter å¼€å¤´ï¼ˆ---ï¼‰
      if (lines.length > 0 && lines[0].trim() === '---') {
        inFrontMatter = true;

        // 2. æŸ¥æ‰¾ Front Matter ç»“æŸä½ç½®ï¼ˆ---ï¼‰
        for (let i = 1; i < lines.length; i++) {
          if (lines[i].trim() === '---') {
            inFrontMatter = false;
            frontMatterEndIndex = i;
            break;
          }

          // 3. è§£æé”®å€¼å¯¹ï¼ˆæ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ•°ç»„ï¼‰
          const line = lines[i].trim();
          if (line && !line.startsWith('#')) { // å¿½ç•¥æ³¨é‡Š
            const colonIndex = line.indexOf(':');
            if (colonIndex > 0) {
              const key = line.substring(0, colonIndex).trim();
              let value = line.substring(colonIndex + 1).trim();

              // å¤„ç†æ•°ç»„ï¼ˆå¦‚ tags: [å‰ç«¯, æ€§èƒ½ä¼˜åŒ–]ï¼‰
              if (value.startsWith('[') && value.endsWith(']')) {
                value = value.slice(1, -1).split(',').map(item => item.trim());
              }
              // å¤„ç†å­—ç¬¦ä¸²ï¼ˆå¦‚ title: "æ€§èƒ½ä¼˜åŒ–å®æˆ˜"ï¼‰
              else if (value.startsWith('"') && value.endsWith('"')) {
                value = value.slice(1, -1);
              }
              // å¤„ç†å¸ƒå°”å€¼
              else if (value === 'true') {
                value = true;
              } else if (value === 'false') {
                value = false;
              }
              // å¤„ç†æ•°å­—
              else if (!isNaN(value)) {
                value = Number(value);
              }

              data[key] = value;
            }
          }
        }
      }

      // 4. æå–æ­£æ–‡å†…å®¹ï¼ˆFront Matter ä¹‹åçš„éƒ¨åˆ†ï¼‰
      if (frontMatterEndIndex !== -1) {
        content = lines.slice(frontMatterEndIndex + 1).join('\n').trim();
      } else {
        content = mdContent.trim(); // æ—  Front Matter æ—¶ï¼Œå…¨éƒ¨ä½œä¸ºæ­£æ–‡
      }

      return {
        data: data,
        content: content
      }; // ä¸åŸ gray-matter è¿”å›æ ¼å¼å…¼å®¹
    }
    // -------------------------- è‡ªå®šä¹‰è§£æå‡½æ•°ç»“æŸ --------------------------

    // 1. ä»URLè·å–åšå®¢æ ‡è¯†ï¼ˆæ”¯æŒIDæˆ–Slugï¼‰
    function getBlogIdentifier() {
      const params = new URLSearchParams(window.location.search);
      // ä¼˜å…ˆä»æŸ¥è¯¢å‚æ•°è·å–ï¼ˆå…¼å®¹åŸæœ‰é€»è¾‘ï¼‰
      const paramIdentifier = params.get('id') || params.get('slug');
      if (paramIdentifier) return paramIdentifier;

      // æ–°å¢ï¼šä»URLè·¯å¾„ä¸­æå–slugï¼ˆé€‚é…é™æ€è·¯å¾„æ ¼å¼ï¼Œå¦‚ /æ€§èƒ½ä¼˜åŒ–.htmlï¼‰
      try {
        const pathname = window.location.pathname;
        const pathSegments = pathname.split('/');
        const fileName = pathSegments[pathSegments.length - 1]; // å–æœ€åä¸€æ®µï¼ˆå¦‚ "æ€§èƒ½ä¼˜åŒ–.html"ï¼‰
        const slug = fileName.replace(/\.html$/, ''); // å»é™¤ .html åç¼€
        if (slug && slug !== '') return decodeURIComponent(
          slug); // è§£ç URLç¼–ç çš„ä¸­æ–‡ï¼ˆå¦‚ %E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96 â†’ æ€§èƒ½ä¼˜åŒ–ï¼‰
      } catch (error) {
        console.error('ä»è·¯å¾„æå–slugå¤±è´¥ï¼š', error);
      }

      return '';
    }

    // 2. åŠ è½½åšå®¢å…ƒæ•°æ®ï¼ˆblogs.jsonï¼‰
    async function loadBlogMetadata() {
      try {
        const response = await fetch('/data/blog-meta.json');
        if (!response.ok) {
          throw new Error(`å…ƒæ•°æ®è¯·æ±‚å¤±è´¥ï¼š${response.status}ï¼ˆè¯·æ£€æŸ¥ /data/blog-meta.json è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼‰`);
        }
        state.allBlogs = await response.json();
        state.metaLoaded = true;
        return true;
      } catch (error) {
        console.error('åŠ è½½åšå®¢å…ƒæ•°æ®å¤±è´¥ï¼š', error);
        state.metaLoaded = false;
        return false;
      }
    }

    // 3. åŠ è½½å¹¶è§£æ Markdown æ–‡ç« å†…å®¹ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼šä½¿ç”¨è‡ªå®šä¹‰è§£æå‡½æ•°ï¼‰
    async function loadBlogContent() {
      const identifier = getBlogIdentifier();

      if (!identifier) {
        showError('æœªæŒ‡å®šåšå®¢æ–‡ç« ï¼ˆæ— æ³•ä»URLæå–slugæˆ–idï¼‰');
        return;
      }

      try {
        // æ˜¾ç¤ºåŠ è½½ä¸­
        loaderContainer.classList.remove('hidden');
        errorState.classList.add('hidden');
        blogContentContainer.classList.add('hidden');

        // å…ˆåŠ è½½å…ƒæ•°æ®ï¼ˆblog-meta.jsonï¼‰
        if (!state.metaLoaded && !(await loadBlogMetadata())) {
          throw new Error('æ— æ³•åŠ è½½åšå®¢å…ƒæ•°æ®ï¼ˆ/data/blog-meta.json ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯ï¼‰');
        }

        // æŸ¥æ‰¾å½“å‰åšå®¢çš„å…ƒæ•°æ®ï¼ˆåŒ¹é… id æˆ– slugï¼‰
        const blogMeta = state.allBlogs.find(blog =>
          blog.id ? .toString() === identifier || blog.slug === identifier
        );
        if (!blogMeta) {
          throw new Error(`æœªæ‰¾åˆ°è¯¥åšå®¢æ–‡ç« ï¼ˆåœ¨ blog-meta.json ä¸­æœªåŒ¹é…åˆ° slug: ${identifier} æˆ– id: ${identifier}ï¼‰`);
        }

        state.currentBlog = blogMeta;

        // æ„å»º MD æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ _posts/2024-08-26-æ€§èƒ½ä¼˜åŒ–.mdï¼‰
        const mdFileName = blogMeta.fileName || `${blogMeta.publishDate.split('T')[0]}-${blogMeta.slug}.md`;
        const mdFileUrl = `/_posts/${mdFileName}`; // ç¡®ä¿ _posts ç›®å½•åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹

        // åŠ è½½ MD æ–‡ä»¶
        const mdResponse = await fetch(mdFileUrl);
        if (!mdResponse.ok) {
          throw new Error(`MD æ–‡ä»¶è¯·æ±‚å¤±è´¥ï¼š${mdResponse.status}ï¼ˆè·¯å¾„ï¼š${mdFileUrl} ä¸å­˜åœ¨ï¼‰`);
        }
        const mdContent = await mdResponse.text();

        // ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°è§£æ Front Matter
        const {
          data: frontMatter,
          content: mdBody
        } = parseFrontMatter(mdContent);
        // åˆå¹¶å…ƒæ•°æ®ï¼ˆFront Matter ä¼˜å…ˆçº§é«˜äº blog-meta.jsonï¼‰
        const blogData = {
          ...blogMeta,
          ...frontMatter
        };

        // æ¸²æŸ“åšå®¢å†…å®¹
        renderBlogContent(blogData, mdBody);

        // æ¸²æŸ“ç›¸å…³ç»„ä»¶ï¼ˆç›¸å…³æ–‡ç« ã€çƒ­é—¨æ ‡ç­¾ã€ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ï¼‰
        renderRelatedBlogs();
        renderPopularTags();
        renderPrevNextBlogs();

        // æ›´æ–°UIï¼šæ˜¾ç¤ºå†…å®¹ï¼Œéšè—åŠ è½½
        loaderContainer.classList.add('hidden');
        blogContentContainer.classList.remove('hidden');

      } catch (error) {
        console.error('åŠ è½½åšå®¢å†…å®¹å¤±è´¥ï¼š', error);
        showError(error.message || 'åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
      }
    }

    // 4. æ¸²æŸ“åšå®¢æ­£æ–‡å†…å®¹ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
    function renderBlogContent(blogData, mdBody) {
      // æ›´æ–°é¡µé¢æ ‡é¢˜å’ŒSEOå…ƒæ ‡ç­¾
      const pageTitle = `${blogData.title} | è†å­¦è¾‰çš„ä¸ªäººä¸»é¡µ`;
      const pageDesc = blogData.excerpt || mdBody.slice(0, 160); // ä»æ­£æ–‡å–æ‘˜è¦ï¼ˆæ— excerptæ—¶ï¼‰
      const pageKeywords = blogData.tags ? blogData.tags.join(',') : 'æŠ€æœ¯åšå®¢,å‰ç«¯å¼€å‘,åç«¯å¼€å‘';

      document.getElementById('page-title').textContent = pageTitle;
      document.getElementById('page-description').setAttribute('content', pageDesc);
      document.getElementById('page-keywords').setAttribute('content', pageKeywords);

      // å¡«å……åšå®¢åŸºæœ¬ä¿¡æ¯
      document.getElementById('blog-category').textContent = getCategoryName(blogData.category);
      document.getElementById('blog-title').textContent = blogData.title;
      document.getElementById('blog-publish-date').innerHTML =
        `<i class="fa fa-calendar-o mr-1"></i>${formatDate(blogData.publishDate || blogData.date)}`;
      document.getElementById('blog-views').textContent += ` ${blogData.views || 1}`;
      document.getElementById('blog-read-time').textContent += ` ${calculateReadTime(mdBody)}`;

      // å°é¢å›¾ï¼ˆå¤„ç†è·¯å¾„ï¼šå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè¡¥å……æ ¹è·¯å¾„ï¼‰
      const coverImage = blogData.coverImage ?
        (blogData.coverImage.startsWith('/') ? blogData.coverImage : `/${blogData.coverImage}`) :
        '/assets/images/blog-covers/default.jpg';
      document.getElementById('blog-cover').src = coverImage;
      document.getElementById('blog-cover').alt = blogData.title || 'åšå®¢å°é¢';

      // æ¸²æŸ“ MD æ­£æ–‡ï¼ˆå¼€å¯ä»£ç é«˜äº®ï¼‰
      marked.setOptions({
        highlight: (code, lang) => {
          // ä¿®å¤ï¼šå¤„ç†æ— è¯­è¨€æŒ‡å®šçš„ä»£ç å—ï¼ˆé»˜è®¤ä½¿ç”¨ plaintextï¼‰
          if (lang && hljs.getLanguage(lang)) {
            return hljs.highlight(code, {
              language: lang
            }).value;
          }
          // æ— è¯­è¨€æ—¶ï¼Œä½¿ç”¨ plaintext é¿å…é«˜äº®å¤±è´¥
          return hljs.highlight(code, {
            language: 'plaintext'
          }).value;
        },
        breaks: true, // æ”¯æŒæ¢è¡Œç¬¦
        gfm: true, // æ”¯æŒ GitHub Flavored Markdownï¼ˆå¿…é¡»å¼€å¯ï¼Œå¦åˆ™ä»£ç å—ä¸ç”Ÿæ•ˆï¼‰
        // æ–°å¢ï¼šæ˜ç¡®ä»£ç å—æ¸²æŸ“è§„åˆ™ï¼ˆç¡®ä¿ç”Ÿæˆ <pre><code> æ ‡ç­¾ï¼‰
        langPrefix: 'language-', // ä¸º <code> æ ‡ç­¾æ·»åŠ  language-xxx ç±»ï¼Œä¾¿äº highlight.js è¯†åˆ«
        pedantic: false, // ç¦ç”¨ä¸¥æ ¼çš„ Markdown è¯­æ³•æ£€æŸ¥ï¼Œå…¼å®¹æ›´å¤šä»£ç å—æ ¼å¼
      });

      // æ¸²æŸ“ MD å†…å®¹åˆ°é¡µé¢
      const blogContentEl = document.getElementById('blog-content');
      blogContentEl.innerHTML = marked.parse(mdBody);

      // å…³é”®æ­¥éª¤ï¼šæ‰‹åŠ¨è§¦å‘ highlight.js å¯¹åŠ¨æ€ç”Ÿæˆçš„ä»£ç å—è¿›è¡Œé«˜äº®
      hljs.highlightAll(); // è¿™è¡Œæ˜¯æ ¸å¿ƒï¼Œç¡®ä¿ä»£ç å—æ ·å¼ç”Ÿæ•ˆ

      // æ¸²æŸ“æ ‡ç­¾
      const tagsContainer = document.getElementById('blog-tags');
      tagsContainer.innerHTML = '';
      if (blogData.tags && blogData.tags.length > 0) {
        blogData.tags.forEach(tag => {
          const tagEl = document.createElement('a');
          tagEl.href = `/blog.html?tag=${encodeURIComponent(tag)}`;
          tagEl.className =
            'px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded hover:bg-gray-300 transition-colors';
          tagEl.textContent = tag;
          tagsContainer.appendChild(tagEl);
        });
      } else {
        tagsContainer.innerHTML = '<span class="text-gray-400 text-xs">æ— æ ‡ç­¾</span>';
      }
    }

    // 5. æ¸²æŸ“ç›¸å…³æ–‡ç« ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
    // 5. æ¸²æŸ“ç›¸å…³æ–‡ç« ï¼ˆä¿®å¤æ ·å¼å’Œé“¾æ¥é€»è¾‘ï¼‰
    function renderRelatedBlogs() {
      const relatedContainer = document.getElementById('related-blogs');
      relatedContainer.innerHTML = '';
      if (!state.currentBlog) return;

      // ç­›é€‰åŒåˆ†ç±»çš„ç›¸å…³æ–‡ç« ï¼ˆæœ€å¤š3ç¯‡ï¼Œæ’é™¤å½“å‰æ–‡ç« ï¼‰
      const relatedBlogs = state.allBlogs
        .filter(blog => blog.category === state.currentBlog.category && blog.id !== state.currentBlog.id)
        .sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate))
        .slice(0, 3);

      if (relatedBlogs.length === 0) {
        relatedContainer.innerHTML = `
      <p class="text-gray-500 text-sm py-3">æš‚æ— ç›¸å…³æ–‡ç« </p>
    `;
        return;
      }

      // å¾ªç¯ç”Ÿæˆç›¸å…³æ–‡ç« é¡¹ï¼Œä½¿ç”¨æ–°æ ·å¼ç±»
      relatedBlogs.forEach(blog => {
        // ç»Ÿä¸€è¯¦æƒ…é¡µé“¾æ¥æ ¼å¼ï¼ˆé€‚é…é™æ€è·¯å¾„ï¼‰
        const detailUrl = `/public/blog/posts/${blog.slug}.html`

        const blogEl = document.createElement('a');
        blogEl.href = detailUrl;
        blogEl.className =
          'related-blog-item flex flex-col md:flex-row items-start md:items-center gap-4 p-3 rounded-lg hover:shadow transition-colors';

        // å›¾ç‰‡ä½¿ç”¨å›ºå®šå®½é«˜æ¯”ï¼Œæ·»åŠ é»˜è®¤å›¾é™çº§
        const imgSrc = blog.coverImage ?
          (blog.coverImage.startsWith('/') ? blog.coverImage : `/${blog.coverImage}`) :
          '/assets/images/blog-covers/default.jpg';

        blogEl.innerHTML = `
      <!-- å°é¢å›¾å®¹å™¨ï¼šå›ºå®šå®½é«˜ï¼Œé¿å…æ‹‰ä¼¸ -->
      <div class="related-blog-img-wrap w-30 h-14 md:w-38 md:h-20 flex-shrink-0">
        <img 
          src="${imgSrc}" 
          alt="${blog.title}" 
          class="w-full h-full object-cover rounded-lg"
          onerror="this.src='/assets/images/blog-covers/default.jpg'"
        >
      </div>
      <!-- æ–‡å­—å†…å®¹å®¹å™¨ï¼šå æ»¡å‰©ä½™ç©ºé—´ -->
      <div class="related-blog-text flex-1 min-w-0">
        <!-- æ ‡é¢˜ï¼šå¼ºåˆ¶1è¡Œï¼Œè¶…å‡ºçœç•¥ -->
        <h4 class="text-base md:font-semibold text-gray-800 line-clamp-1">
          ${blog.title}
        </h4>
        <!-- æ—¥æœŸ + åˆ†ç±»ï¼šè¾…åŠ©ä¿¡æ¯ -->
        <div class="flex items-center gap-2 mt-2 text-sm text-gray-600">
          <span class="flex items-center gap-1">
            <i class="fa fa-tag text-primary"></i>
            ${blog.category || 'æœªåˆ†ç±»'}
          </span>
        </div>
      </div>
    `;

        relatedContainer.appendChild(blogEl);
      });
    }

    // 6. æ¸²æŸ“çƒ­é—¨æ ‡ç­¾ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
    function renderPopularTags() {
      const tagsContainer = document.getElementById('popular-tags');
      tagsContainer.innerHTML = '';
      if (state.allBlogs.length === 0) return;

      // ç»Ÿè®¡æ ‡ç­¾å‡ºç°æ¬¡æ•°
      const tagCount = {};
      state.allBlogs.forEach(blog => {
        blog.tags && blog.tags.forEach(tag => {
          tagCount[tag] = (tagCount[tag] || 0) + 1;
        });
      });

      // æŒ‰æ¬¡æ•°æ’åºï¼Œå–å‰10ä¸ªæ ‡ç­¾
      const sortedTags = Object.entries(tagCount)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);

      sortedTags.forEach(([tag, count]) => {
        const tagEl = document.createElement('a');
        tagEl.href = `/blog.html?tag=${encodeURIComponent(tag)}`;
        const sizeClass = count > 5 ? 'text-sm px-3 py-1.5' : count > 2 ? 'text-xs px-3 py-1' : 'text-xs px-2 py-1';
        tagEl.className =
          `${sizeClass} bg-gray-200 text-gray-700 rounded hover:bg-primary hover:text-white transition-colors`;
        tagEl.textContent = tag;
        tagsContainer.appendChild(tagEl);
      });
    }

    // 7. æ¸²æŸ“ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
    function renderPrevNextBlogs() {
      if (!state.currentBlog || state.allBlogs.length <= 1) return;

      // æŒ‰å‘å¸ƒæ—¥æœŸæ’åºï¼ˆæœ€æ–°åœ¨å‰ï¼‰
      const sortedBlogs = [...state.allBlogs].sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate));
      const currentIndex = sortedBlogs.findIndex(blog => blog.id === state.currentBlog.id || blog.slug === state
        .currentBlog.slug);

      // ä¸Šä¸€ç¯‡ï¼ˆæ›´æ—©çš„æ–‡ç« ï¼‰
      const prevContainer = document.getElementById('prev-blog');
      if (currentIndex < sortedBlogs.length - 1) {
        const prevBlog = sortedBlogs[currentIndex + 1];
        const prevUrl = prevBlog.slug ? `./${prevBlog.slug}.html` : `../blog-detail.html?id=${prevBlog.id}`;
        prevContainer.innerHTML = `
          <p class="text-gray-500 text-sm mb-1">ä¸Šä¸€ç¯‡</p>
          <a href="${prevUrl}" class="text-sm hover:text-primary transition-colors line-clamp-1">
            <i class="fa fa-angle-left mr-1"></i>${prevBlog.title}
          </a>
        `;
      } else {
        prevContainer.innerHTML = '<p class="text-gray-400 text-sm">æ²¡æœ‰æ›´å¤šæ–‡ç« </p>';
      }

      // ä¸‹ä¸€ç¯‡ï¼ˆæ›´æ–°çš„æ–‡ç« ï¼‰
      const nextContainer = document.getElementById('next-blog');
      if (currentIndex > 0) {
        const nextBlog = sortedBlogs[currentIndex - 1];
        const nextUrl = nextBlog.slug ? `./${nextBlog.slug}.html` : `../blog-detail.html?id=${nextBlog.id}`;
        nextContainer.innerHTML = `
          <p class="text-gray-500 text-sm mb-1">ä¸‹ä¸€ç¯‡</p>
          <a href="${nextUrl}" class="text-sm hover:text-primary transition-colors line-clamp-1">
            ${nextBlog.title}<i class="fa fa-angle-right ml-1"></i>
          </a>
        `;
      } else {
        nextContainer.innerHTML = '<p class="text-gray-400 text-sm">æ²¡æœ‰æ›´å¤šæ–‡ç« </p>';
      }
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(dateString) {
      return new Date(dateString).toLocaleDateString('zh-CN', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    }

    // è¾…åŠ©å‡½æ•°ï¼šä¼°ç®—é˜…è¯»æ—¶é—´ï¼ˆæ¯åˆ†é’Ÿ300å­—ï¼‰
    function calculateReadTime(content) {
      const wordCount = content.replace(/\s+/g, '').length;
      const minutes = Math.ceil(wordCount / 300);
      return `${minutes} åˆ†é’Ÿé˜…è¯»`;
    }

    // è¾…åŠ©å‡½æ•°ï¼šè·å–åˆ†ç±»ä¸­æ–‡åç§°
    function getCategoryName(category) {
      const categories = {
        'frontend': 'å‰ç«¯å¼€å‘',
        'backend': 'åç«¯å¼€å‘',
        'devops': 'DevOps',
        'career': 'èŒä¸šå‘å±•'
      };
      return categories[category] || 'æœªåˆ†ç±»';
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ˜¾ç¤ºé”™è¯¯çŠ¶æ€
    function showError(message) {
      loaderContainer.classList.add('hidden');
      errorState.classList.remove('hidden');
      errorState.querySelector('p').textContent = message;
    }

    // è¾…åŠ©å‡½æ•°ï¼šå¤åˆ¶å½“å‰é¡µé¢é“¾æ¥
    function copyCurrentLink() {
      const currentUrl = window.location.href;
      navigator.clipboard.writeText(currentUrl)
        .then(() => {
          copySuccess.classList.remove('hidden');
          setTimeout(() => {
            copySuccess.classList.add('hidden');
          }, 2000);
        })
        .catch(err => {
          console.error('å¤åˆ¶é“¾æ¥å¤±è´¥ï¼š', err);
          alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥');
        });
    }

    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function () {
      // åŠ è½½åšå®¢å†…å®¹
      loadBlogContent();

      // é‡è¯•æŒ‰é’®äº‹ä»¶
      retryBtn.addEventListener('click', loadBlogContent);

      // å¤åˆ¶é“¾æ¥æŒ‰é’®äº‹ä»¶
      copyLinkBtn.addEventListener('click', function (e) {
        e.preventDefault();
        copyCurrentLink();
      });

      // å¹³æ»‘æ»šåŠ¨åŠŸèƒ½ï¼šä¿ç•™åŸæœ‰é€»è¾‘
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();

          // å…³é—­ç§»åŠ¨èœå•
          const mobileMenu = document.getElementById('mobile-menu');
          const menuToggle = document.getElementById('menu-toggle');
          if (mobileMenu && menuToggle && !mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.add('hidden');
            const icon = menuToggle.querySelector('i');
            if (icon) {
              icon.classList.remove('fa-times');
              icon.classList.add('fa-bars');
            }
          }

          // å¹³æ»‘æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®
          const targetId = this.getAttribute('href');
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop - 80,
              behavior: 'smooth'
            });
          }
        });
      });
    });
  </script>

  <script src="/assets/js/main.js"></script>
</body>

</html>